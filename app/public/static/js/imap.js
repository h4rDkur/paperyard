!function(e){e.fn.waitMe=function(o){return this.each(function(){var a,t,i,r,s,n,c=e(this),d="waitMe",l=!1,f="background-color",u="",b="",m={init:function(){switch(s=e.extend({effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}},o),n=(new Date).getMilliseconds(),r=e('<div class="'+d+'" data-waitme_id="'+n+'"></div>'),s.effect){case"none":i=0;break;case"bounce":i=3;break;case"rotateplane":i=1;break;case"stretch":i=5;break;case"orbit":i=2;break;case"roundBounce":i=12;break;case"win8":case"win8_linear":i=5,l=!0;break;case"ios":i=12;break;case"facebook":i=3;break;case"rotation":i=1,f="border-color";break;case"timer":if(i=2,e.isArray(s.color))var m=s.color[0];else m=s.color;u="border-color:"+m;break;case"pulse":i=1,f="border-color";break;case"progressBar":i=1;break;case"bouncePulse":i=3;break;case"img":i=1}if(""!==u&&(u+=";"),i>0){if("img"===s.effect)b='<img src="'+s.source+'">';else for(var v=1;v<=i;++v){if(e.isArray(s.color))null==(m=s.color[v])&&(m="#000");else m=s.color;b+=l?'<div class="'+d+"_progress_elem"+v+'"><div style="'+f+":"+m+'"></div></div>':'<div class="'+d+"_progress_elem"+v+'" style="'+f+":"+m+'"></div>'}t=e('<div class="'+d+"_progress "+s.effect+'" style="'+u+'">'+b+"</div>")}if(s.text&&""===s.maxSize){if(e.isArray(s.color))m=s.color[0];else m=s.color;a=e('<div class="'+d+'_text" style="color:'+m+'">'+s.text+"</div>")}var g=c.find("> ."+d);g&&g.remove();var h=e('<div class="'+d+'_content"></div>');h.append(t,a),r.append(h),"HTML"==c[0].tagName&&(c=e("body")),c.addClass(d+"_container").attr("data-waitme_id",n).append(r),g=c.find("> ."+d);var w=c.find("."+d+"_content");if(g.css({background:s.bg}),w.css({marginTop:-w.outerHeight()/2+"px"}),""!==s.maxSize){var p=t.outerHeight(),y=(t.outerWidth(),p);"img"===s.effect?(t.css({height:s.maxSize+"px"}),t.find(">img").css({maxHeight:"100%"}),w.css({marginTop:-w.outerHeight()/2+"px"})):s.maxSize<y&&h.css({transform:"scale("+s.maxSize/y+")"})}function _(e){w.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}if(c.outerHeight()>e(window).height()){var k=e(window).scrollTop(),x=w.outerHeight(),M=c.offset().top,C=c.outerHeight(),H=k-M+e(window).height()/2;H<0&&(H=Math.abs(H)),H-x>=0&&H+x<=C?(M-k>e(window).height()/2&&(H=x),_(H)):_(H=k>M+C-x?k-M-x:k-M+x),e(document).scroll(function(){var o=e(window).scrollTop()-M+e(window).height()/2;o-x>=0&&o+x<=C&&_(o)})}return g.on("destroyed",function(){s.onClose&&e.isFunction(s.onClose)&&s.onClose(),g.trigger("close")}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},g},hide:function(){var e;e=c.attr("data-waitme_id"),c.removeClass(d+"_container").removeAttr("data-waitme_id"),c.find("."+d+'[data-waitme_id="'+e+'"]').remove()}};return m[o]?m[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void 0:m.init.apply(this,arguments)})},e(window).on("load",function(){e("body.waitMe_body").addClass("hideMe"),setTimeout(function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})}(jQuery);
