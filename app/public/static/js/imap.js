!function(e){e.fn.waitMe=function(o){return this.each(function(){function a(){var e=d.attr("data-waitme_id");d.removeClass(l+"_container").removeAttr("data-waitme_id"),d.find("."+l+'[data-waitme_id="'+e+'"]').remove()}var i,t,r,s,n,c,d=e(this),l="waitMe",f=!1,v="background-color",u="",b="",m={init:function(){function a(e){y.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}var m={effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}};switch(n=e.extend(m,o),c=(new Date).getMilliseconds(),s=e('<div class="'+l+'" data-waitme_id="'+c+'"></div>'),n.effect){case"none":r=0;break;case"bounce":r=3;break;case"rotateplane":r=1;break;case"stretch":r=5;break;case"orbit":r=2;break;case"roundBounce":r=12;break;case"win8":case"win8_linear":r=5,f=!0;break;case"ios":r=12;break;case"facebook":r=3;break;case"rotation":r=1,v="border-color";break;case"timer":if(r=2,e.isArray(n.color))var g=n.color[0];else var g=n.color;u="border-color:"+g;break;case"pulse":r=1,v="border-color";break;case"progressBar":r=1;break;case"bouncePulse":r=3;break;case"img":r=1}if(""!==u&&(u+=";"),r>0){if("img"===n.effect)b='<img src="'+n.source+'">';else for(var h=1;h<=r;++h){if(e.isArray(n.color)){var g=n.color[h];void 0==g&&(g="#000")}else var g=n.color;b+=f?'<div class="'+l+"_progress_elem"+h+'"><div style="'+v+":"+g+'"></div></div>':'<div class="'+l+"_progress_elem"+h+'" style="'+v+":"+g+'"></div>'}t=e('<div class="'+l+"_progress "+n.effect+'" style="'+u+'">'+b+"</div>")}if(n.text&&""===n.maxSize){if(e.isArray(n.color))var g=n.color[0];else var g=n.color;i=e('<div class="'+l+'_text" style="color:'+g+'">'+n.text+"</div>")}var w=d.find("> ."+l);w&&w.remove();var p=e('<div class="'+l+'_content"></div>');p.append(t,i),s.append(p),"HTML"==d[0].tagName&&(d=e("body")),d.addClass(l+"_container").attr("data-waitme_id",c).append(s),w=d.find("> ."+l);var y=d.find("."+l+"_content");if(w.css({background:n.bg}),y.css({marginTop:-y.outerHeight()/2+"px"}),""!==n.maxSize){var _=t.outerHeight(),k=(t.outerWidth(),_);"img"===n.effect?(t.css({height:n.maxSize+"px"}),t.find(">img").css({maxHeight:"100%"}),y.css({marginTop:-y.outerHeight()/2+"px"})):n.maxSize<k&&p.css({transform:"scale("+n.maxSize/k+")"})}if(d.outerHeight()>e(window).height()){var x=e(window).scrollTop(),M=y.outerHeight(),C=d.offset().top,H=d.outerHeight(),z=x-C+e(window).height()/2;z<0&&(z=Math.abs(z)),z-M>=0&&z+M<=H?(C-x>e(window).height()/2&&(z=M),a(z)):(z=x>C+H-M?x-C-M:x-C+M,a(z)),e(document).scroll(function(){var o=e(window).scrollTop(),i=o-C+e(window).height()/2;i-M>=0&&i+M<=H&&a(i)})}return w.on("destroyed",function(){n.onClose&&e.isFunction(n.onClose)&&n.onClose(),w.trigger("close")}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},w},hide:function(){a()}};return m[o]?m[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void 0:m.init.apply(this,arguments)})},e(window).on("load",function(){e("body.waitMe_body").addClass("hideMe"),setTimeout(function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})}(jQuery);
